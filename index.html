<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta Tags -->
  <title>J & D's Heritage Hog Farm</title>
  <meta name="title" content="J & D's Heritage Hog Farm">
  <meta name="description" content="Discover the tradition, care, and flavor of heritage hog farming at J & D's Heritage Hog Farm. Sustainably raised hogs, authentic community values, and delicious culinary experiences.">

  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/images/branding/13.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/images/branding/13.png">
  <link rel="apple-touch-icon" href="assets/images/branding/13.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffcd54">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jdhogfarm.com/">
  <meta property="og:title" content="J & D's Heritage Hog Farm">
  <meta property="og:description" content="Discover the tradition, care, and flavor of heritage hog farming at J & D's Heritage Hog Farm. Sustainably raised hogs, authentic community values, and delicious culinary experiences.">
  <meta property="og:image" content="https://jdhogfarm.com/assets/images/branding/13.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://jdhogfarm.com/">
  <meta property="twitter:title" content="J & D's Heritage Hog Farm">
  <meta property="twitter:description" content="Discover the tradition, care, and flavor of heritage hog farming at J & D's Heritage Hog Farm. Sustainably raised hogs, authentic community values, and delicious culinary experiences.">
  <meta property="twitter:image" content="https://jdhogfarm.com/assets/images/branding/13.png">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Asap:wght@500&family=Noto+Serif:wght@700&display=swap" rel="stylesheet">
  
  <style>
    /* ------------------------------------------------------------
     GLOBAL FONT STYLING
     ------------------------------------------------------------ */
    body {
      font-family: 'Asap', sans-serif !important;
      font-weight: 500 !important;
    }

    /* Headings use Noto Serif Bold 700 */
    .markdown-content h1, .markdown-content h2, .markdown-content h3,
    .markdown-content h4, .markdown-content h5, .markdown-content h6,
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Noto Serif', serif !important;
      font-weight: 700 !important;
    }

    /* ------------------------------------------------------------
     MARKDOWN CONTENT STYLING
     ------------------------------------------------------------ */
    .markdown-content h1, .markdown-content h2, .markdown-content h3,
    .markdown-content h4, .markdown-content h5, .markdown-content h6 {
      margin-bottom: 0.75rem !important;
      line-height: 1.2 !important;
    }

    .markdown-content h1 {
      font-size: 2em !important;
      margin-top: 1em !important;
    }

    .markdown-content h2 {
      font-size: 1.75em !important;
      margin-top: 1em !important;
    }

    .markdown-content h3 {
      font-size: 1.5em !important;
      margin-top: 1em !important;
    }

    .markdown-content h4 {
      font-size: 1.25em !important;
      margin-top: 1em !important;
    }

    .markdown-content h5 {
      font-size: 1.1em !important;
      margin-top: 1em !important;
    }

    .markdown-content h6 {
      font-size: 1em !important;
      margin-top: 1em !important;
    }

    .markdown-content p {
      margin-bottom: 1em !important;
      line-height: 1.5 !important;
    }

    .markdown-content ul, .markdown-content ol {
      padding-left: 1.25em !important;
      margin-bottom: 1em !important;
    }

    .markdown-content li {
      margin-bottom: 0.5em !important;
    }

    .markdown-content blockquote {
      border-left: 4px solid #ccc !important;
      padding-left: 1em !important;
      color: #555 !important;
      margin-bottom: 1em !important;
    }

    .markdown-content pre {
      background: #f5f5f5 !important;
      padding: 1em !important;
      overflow: auto !important;
      margin-bottom: 1em !important;
      border-radius: 4px !important;
      font-family: Consolas, Monaco, 'Courier New', monospace !important;
      font-size: 0.9em !important;
    }

    .markdown-content code {
      background: #f5f5f5 !important;
      padding: 0.2em 0.4em !important;
      border-radius: 4px !important;
      font-family: Consolas, Monaco, 'Courier New', monospace !important;
      font-size: 0.95em !important;
    }

    .markdown-content table {
      width: 100% !important;
      border: 1px solid #ddd !important;
      margin-bottom: 1em !important;
    }

    .markdown-content th, .markdown-content td {
      border: 1px solid #ddd !important;
      padding: 0.5em !important;
    }

    .markdown-content hr {
      border: none;
      border-top: 2px solid #a20000 !important;
      margin: 2em 0 !important;
    }

    /* Minimal custom CSS for scrollbar hiding */
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none; 
    }

    /* Styles for the horizontal scroll gallery */
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    .scroll-container {
      display: flex;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      padding: 20px;
      gap: 20px;
      position: relative;
      scroll-behavior: smooth;
      justify-content: center;
    }
    .image-wrapper {
      flex: none;
      width: 300px;
      height: 300px;
    }
    .image-wrapper img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }
    .scroll-container::-webkit-scrollbar {
      display: none;
    }
    .scroll-container {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    @media (max-width: 640px) {
      .image-wrapper {
        width: 200px;
        height: 200px;
      }
      /* Make sure the layout fits nicely within ~375px width */
      body, html {
        width: 100%;
        margin: 0 auto;
      }
      main {
        padding: 1rem;
      }
      h1, h2, h3, h4 {
        text-align: center !important;
      }
      .markdown-content p, .markdown-content ul, .markdown-content ol, .markdown-content li {
        text-align: center;
      }
      .flex-col, .flex {
        align-items: center !important;
        justify-content: center !important;
      }
      .w-48.h-48 {
        width: 150px !important;
        height: 150px !important;
      }
    }

    /* Modal styles */
    .modal-bg {
      backdrop-filter: blur(4px);
    }
  </style>

  <!-- Load Marked.js -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- Load DOMPurify -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
  <!-- Tooly tooltip library -->
  <script src="https://cdn.jsdelivr.net/npm/tooly/dist/tooly.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tooly/dist/tooly.min.css" />
</head>
<body class="font-sans antialiased text-red-800 flex flex-col h-screen bg-[url('assets/images/backgrounds/image-028.jpeg')] bg-center bg-cover bg-fixed relative">
  <!-- ‚ú® Parallax DIV ADDED BELOW ‚ú® -->
  <div class="absolute inset-0 bg-center bg-cover" style="background-image: url('assets/images/backgrounds/image-028.jpeg');" data-rellax-speed="-2"></div>
  <!-- END OF ADDED CODE -->

  <!-- Semi-transparent overlay -->
  <div class="fixed inset-0 bg-[#ffcd54] opacity-85 z-10"></div>

  <!-- Header (sticky) -->
  <header class="sticky top-0 text-center py-6 border-b-8 border-red-800 bg-[#ffcd54] flex-none z-20">
    <h1 class="text-5xl sm:text-3xl font-bold flex items-center justify-center">
      <img src="assets/images/branding/3.png" alt="J & D's Heritage Hog Farm" class="mx-auto h-32 w-auto" />
    </h1>
  </header>
  

  <!-- Main Content (single main) -->
  <main class="max-w-4xl mx-auto p-8 sm:p-4 flex-grow overflow-auto relative z-20 scrollbar-hide flex flex-col items-center justify-start">
    <!-- Home Section -->
    <section class="mb-12 p-6 sm:p-4 border-4 rounded-lg border-red-800 shadow-none w-full text-center">
      <h2 class="text-3xl sm:text-2xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">Home üè†</h2>
      <div id="home-content" class="markdown-content text-lg sm:text-base"></div>
    </section>

    <!-- About Section -->
    <section class="mb-12 p-6 sm:p-4 border-4 rounded-lg border-red-800 shadow-none w-full text-center">
      <h2 class="text-3xl sm:text-2xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">About Us ü§ù</h2>
      <div id="about-content" class="markdown-content text-lg sm:text-base"></div>

      <!-- Profile Panels -->
      <div class="flex flex-col sm:flex-row gap-8 items-center justify-center mt-8 w-full">
        <div class="max-w-sm text-center flex flex-col items-center">
          <img src="assets/images/general/007.jpg" alt="Joe" class="w-48 h-48 object-cover rounded-full mx-auto mb-4">
          <h3 class="text-xl font-bold mb-2">Joe</h3>
          <p class="text-red-800 text-center px-4">Joe is a dedicated caretaker of our heritage hogs. With years of experience and a passion for sustainable farming, he ensures the well-being of our animals and the quality of our products.</p>
        </div>
        <div class="max-w-sm text-center flex flex-col items-center">
          <img src="assets/images/general/006.jpg" alt="Deb" class="w-48 h-48 object-cover rounded-full mx-auto mb-4">
          <h3 class="text-xl font-bold mb-2">Deb</h3>
          <p class="text-red-800 text-center px-4">Deb is the nurturing soul behind our farm's community outreach. Her warmth, culinary skills, and creative approach bring families and friends together to celebrate the flavors and traditions of heritage hog farming.</p>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section class="mb-12 p-6 sm:p-4 border-4 rounded-lg border-red-800 w-full text-center">
      <h2 class="text-3xl sm:text-2xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">Gallery üñºÔ∏è</h2>
      <div class="scroll-container w-full justify-center" id="scroll-container"></div>
    </section>

    <!-- Contact Section with Embedded Form (using modal on fetch result) -->
    <section class="text-center p-6 sm:p-4 border-4 border-red-800 mb-12 w-full flex flex-col items-center">
      <h3 class="text-2xl sm:text-xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">Get Started Today! üöÄ</h3>
      <form 
        id="contact-form"
        class="max-w-md mx-auto space-y-4 w-full"
        action="https://formspree.io/f/xvgongjo"
        method="POST"
      >
        <label class="block text-left w-full">
          <span class="text-red-800 font-bold">Your Name:</span>
          <input 
            class="w-full mt-1 border border-gray-300 rounded p-2 focus:outline-none focus:ring-2 focus:ring-red-500"
            type="text" 
            name="name" 
            placeholder="Your Name" 
            required 
          />
        </label>

        <label class="block text-left w-full">
          <span class="text-red-800 font-bold">Your Email:</span>
          <input 
            class="w-full mt-1 border border-gray-300 rounded p-2 focus:outline-none focus:ring-2 focus:ring-red-500"
            type="email" 
            name="email" 
            placeholder="Your Email" 
            required 
          />
        </label>

        <label class="block text-left w-full">
          <span class="text-red-800 font-bold">Your Message:</span>
          <textarea 
            class="w-full mt-1 border border-gray-300 rounded p-2 focus:outline-none focus:ring-2 focus:ring-red-500"
            name="message" 
            placeholder="Your Message" 
            rows="4" 
            required
          ></textarea>
        </label>

        <button 
          type="submit"
          class="px-4 py-2 bg-red-800 text-white font-semibold rounded hover:bg-red-900 transition w-full"
        >
          Send
        </button>
      </form>
    </section>

    <!-- Map Section -->
    <section class="mb-12 p-6 sm:p-4 border-4 border-red-800 rounded-lg bg-primary w-full text-center">
      <h4 class="text-2xl sm:text-xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">Where We're Located üåç</h4>
      <div class="relative w-full h-[450px]">
        <iframe 
          class="absolute inset-0 w-full h-full"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d47510.36286382497!2d-92.269941!3d37.13819095!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x87d0081648854f83%3A0x7dcdeb008ad2fbe2!2sMountain%20Grove%2C%20MO%2065711!5e1!3m2!1sen!2sus!4v1733535778975!5m2!1sen!2sus"
          style="border:0;" 
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-6 text-center mt-12 border-t-8 border-red-800 bg-[#ffcd54]/90 relative z-20 w-full">
      <p class="text-sm text-red-800">&copy; 2024 Your Brand. All rights reserved.</p>
    </footer>
  </main>

  <!-- Modal for form submission results -->
  <div id="modal-overlay" class="fixed inset-0 z-50 hidden">
    <div class="modal-bg absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4">
      <div class="max-w-sm w-full bg-[#ffcd54] border-4 border-red-800 rounded-lg p-6 relative text-center">
        <button id="close-modal" class="absolute top-2 right-2 text-red-800 font-bold text-xl hover:text-red-900">&times;</button>
        <h2 id="modal-title" class="text-2xl font-black uppercase bg-red-800 text-[#ffcd54] text-center mb-4 p-2">Status</h2>
        <p id="modal-message" class="text-red-800 mb-4 text-center text-lg"></p>
        <div class="text-center">
          <button id="close-button" class="px-4 py-2 bg-red-800 text-white font-semibold rounded hover:bg-red-900 transition">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Load the Rellax library (Parallax) -->
  <script src="https://cdn.jsdelivr.net/npm/rellax@1.12.1/rellax.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var homeContainer = document.querySelector('#home-content');
      var aboutContainer = document.querySelector('#about-content');

      // Modal elements
      const modalOverlay = document.getElementById('modal-overlay');
      const modalTitle = document.getElementById('modal-title');
      const modalMessage = document.getElementById('modal-message');
      const closeModal = document.getElementById('close-modal');
      const closeButton = document.getElementById('close-button');

      function showModal(title, message) {
        modalTitle.innerText = title;
        modalMessage.innerText = message;
        modalOverlay.classList.remove('hidden');
      }

      function hideModal() {
        modalOverlay.classList.add('hidden');
      }

      closeModal.addEventListener('click', hideModal);
      closeButton.addEventListener('click', hideModal);

      // Load home.md
      fetch('data/home.md')
        .then(response => {
          if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
          }
          return response.text();
        })
        .then(markdown => {
          const rawHtml = marked.parse(markdown);
          const safeHtml = DOMPurify.sanitize(rawHtml);
          homeContainer.innerHTML = safeHtml;
        })
        .catch(error => {
          console.error('Error loading home.md:', error);
          homeContainer.innerText = 'Sorry, the Home section could not be loaded.';
        });

      // Load about.md
      fetch('data/about.md')
        .then(response => {
          if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
          }
          return response.text();
        })
        .then(markdown => {
          const rawHtml = marked.parse(markdown);
          const safeHtml = DOMPurify.sanitize(rawHtml);
          aboutContainer.innerHTML = safeHtml;
        })
        .catch(error => {
          console.error('Error loading about.md:', error);
          aboutContainer.innerText = 'Sorry, the About Us section could not be loaded.';
        });

      // Load gallery items from JSON
      fetch('data/gallery.json')
        .then(response => {
          if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
          }
          return response.json();
        })
        .then(data => {
          const scrollContainer = document.getElementById('scroll-container');

          // Insert initial images
          data.images.forEach(img => {
            const wrapper = document.createElement('div');
            wrapper.className = 'image-wrapper flex-shrink-0';
            const imageElement = document.createElement('img');
            imageElement.src = img.src;
            imageElement.alt = img.alt;
            wrapper.appendChild(imageElement);
            scrollContainer.appendChild(wrapper);
          });

          applyInfiniteScrollWiggle();
        })
        .catch(error => {
          console.error('Error loading gallery.json:', error);
        });

      function applyInfiniteScrollWiggle() {
        const scrollContainer = document.querySelector('#scroll-container');
        const originalImages = Array.from(scrollContainer.querySelectorAll('.image-wrapper'));

        // Clone images to create 3 sets total
        for (let i = 0; i < 2; i++) {
          originalImages.forEach(img => {
            const clone = img.cloneNode(true);
            scrollContainer.appendChild(clone);
          });
        }

        const allImages = Array.from(scrollContainer.querySelectorAll('.image-wrapper'));
        let totalWidth = 0;
        let segmentWidth = 0;

        window.addEventListener('load', () => {
          totalWidth = allImages.reduce((acc, img) => {
            return acc + img.offsetWidth + 20;
          }, 20);

          segmentWidth = totalWidth / 3;
          scrollContainer.scrollLeft = segmentWidth;
        });

        // Wiggle parameters
        const amplitude = 5;     
        const frequency = 0.01; 

        scrollContainer.addEventListener('scroll', () => {
          const scrollLeft = scrollContainer.scrollLeft;

          // Wiggle effect
          allImages.forEach((wrapper, index) => {
            const direction = index % 2 === 0 ? 1 : -1;
            const rotation = Math.sin(scrollLeft * frequency) * amplitude * direction;
            wrapper.style.transform = `rotate(${rotation}deg)`;
          });

          // Infinite scroll logic
          if (scrollLeft < segmentWidth) {
            scrollContainer.scrollLeft = scrollLeft + segmentWidth;
          } else if (scrollLeft > 2 * segmentWidth) {
            scrollContainer.scrollLeft = scrollLeft - segmentWidth;
          }
        });

        // Drag-to-scroll logic
        let isDown = false;
        let startX;
        let scrollLeftPos;

        scrollContainer.style.cursor = 'grab';

        scrollContainer.addEventListener('mousedown', (e) => {
          isDown = true;
          scrollContainer.classList.add('active');
          scrollContainer.style.cursor = 'grabbing';
          startX = e.pageX - scrollContainer.offsetLeft;
          scrollLeftPos = scrollContainer.scrollLeft;
          e.preventDefault();
        });

        scrollContainer.addEventListener('mouseleave', () => {
          isDown = false;
          scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mouseup', () => {
          isDown = false;
          scrollContainer.style.cursor = 'grab';
        });

        scrollContainer.addEventListener('mousemove', (e) => {
          if(!isDown) return;
          e.preventDefault();
          const x = e.pageX - scrollContainer.offsetLeft;
          const walk = (x - startX);
          scrollContainer.scrollLeft = scrollLeftPos - walk;
        });
      }

      // Initialize Parallax
      new Rellax('[data-rellax-speed]');

      // Handle Form Submission with Fetch & Show Modal
      const contactForm = document.getElementById('contact-form');
      contactForm.addEventListener('submit', function (event) {
        event.preventDefault();

        const formData = new FormData(contactForm);
        const endpoint = 'https://formspree.io/f/xvgongjo';

        fetch(endpoint, {
          method: 'POST',
          body: formData
        })
        .then(response => {
          if (response.ok) {
            // Success
            showModal('Success üéâ', 'Your message has been sent successfully! Thank you for reaching out.');
            contactForm.reset();
          } else {
            // Error
            showModal('Error üòû', 'Oops! Something went wrong. Please try again later.');
          }
        })
        .catch(error => {
          console.error('Form submission error:', error);
          showModal('Error üòû', 'Could not send your message. Please check your network connection and try again.');
        });
      });
    });
  </script>
</body>
</html>
